<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Utilities for Convenient Extraction of Medical Image Metadata • radtools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Utilities for Convenient Extraction of Medical Image Metadata">
<meta property="og:description" content="A collection of utilities for navigating medical image
        data. The DICOM and NIfTI formats are supported. Functions
        provide simple interfaces to the data and metadata contained in
        these formats. A particular emphasis on metadata allows simple
        conversion of image metadata to familiar R data structures such
        as lists and data frames. Where possible, generic functions can
        silently process either DICOM or NIfTI data. Additionally,
        image data can be extracted and viewed.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">radtools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.7.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/oro_compare.html">Comparison to metadata extraction with oro.dicom and oro.nifti</a>
    </li>
    <li>
      <a href="articles/radtools_usage.html">Package usage: radtools</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div id="radtools" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#radtools" class="anchor" aria-hidden="true"></a>radtools</h1></div>
<p><code>radtools</code> is an R package that provides utilities to explore images in the two leading medical image formats: <a href="https://www.dicomstandard.org/" class="external-link">DICOM</a> and <a href="https://nifti.nimh.nih.gov/" class="external-link">NIfTI</a>. This documentation demonstrates how to read image data into R, extract data and metadata, and view images.</p>
</div>
<div id="citation" class="section level1">
<h1 class="hasAnchor">
<a href="#citation" class="anchor" aria-hidden="true"></a>Citation</h1>
<p>Russell and Ghosh. <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6518432.3/" class="external-link">Radtools: R utilities for convenient extraction of medical image metadata</a>. F1000 Research 5 March 2019. doi: 10.12688/f1000research.17139.3</p>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor" aria-hidden="true"></a>Installation</h1>
<p>Radtools is on <a href="https://neuroconductor.org/package/radtools" class="external-link">Neuroconductor</a>.</p>
<p>To install from within R:</p>
<p><code>{r cran-installation, eval = FALSE} source("https://neuroconductor.org/neurocLite.R") neuro_install('radtools')</code></p>
<p>To install the stable release from GitHub:</p>
<p><code>{r gh-stable, eval = FALSE} neuro_install('radtools', release = "stable", release_repo = "github")</code></p>
<p>To install the development version from GitHub:</p>
<p><code>{r gh-installation, eval = FALSE} neuro_install('radtools', release = "current", release_repo = "github")</code></p>
</div>
<div id="image-file-formats" class="section level1">
<h1 class="hasAnchor">
<a href="#image-file-formats" class="anchor" aria-hidden="true"></a>Image file formats</h1>
<div id="dicom" class="section level2">
<h2 class="hasAnchor">
<a href="#dicom" class="anchor" aria-hidden="true"></a>DICOM</h2>
<p>DICOM (Digital Imaging and Communication in Medicine) is a standard for management of medical images and image metadata. The <a href="https://www.dicomstandard.org/current/" class="external-link">DICOM standard</a> specifies a file format definition. Each DICOM file includes optional pixel data and embedded metadata. Typically, each DICOM file contains one two-dimensional image slice. Radtools also supports DICOM files that do not contain pixel data.</p>
<p>DICOM metadata is embedded in each file and allows image series to be reconstructed from multiple files via shared metadata identifying the patient, etc. DICOM files can be analyzed individually, or a directory containing an entire image series can be analyzed as one three-dimensional image.</p>
</div>
<div id="nifti" class="section level2">
<h2 class="hasAnchor">
<a href="#nifti" class="anchor" aria-hidden="true"></a>NIfTI</h2>
<p>NIfTI (Neuroimaging Informatics Technology Initiative) format is an adaptation of the previous ANALYZE format that solves several challenges with the older format. NIfTI images can be a single file containing the image and metadata (<code>.nii</code>) or pair of files storing the image and metadata separately (<code>.hdr</code>/<code>.img</code>), and can be compressed. Image data can have up to seven dimensions. The first three dimensions are reserved for spatial dimensions and the optional fourth dimension defines time points. Unlike DICOM format, the NIfTI format specifies a constant-size header with a fixed set of metadata attributes.</p>
<p><a href="https://brainder.org/2012/09/23/the-nifti-file-format/" class="external-link">This article</a> provides an excellent introduction to NIfTI-1 format.</p>
<p>Our package supports NIfTI-1 format. The recently developed NIfTI-2 is very similar to NIfTI-1, and permits storage of more datapoints in each dimension. NIfTI-2 is not bitwise compatible with NIfTI-1. We will add support for NIfTI-2 if demand exists. <a href="https://brainder.org/2015/04/03/the-nifti-2-file-format/" class="external-link">This article</a> provides more background on the differences between NIfTI-1 and NIfTI-2.</p>
</div>
</div>
<div id="import-the-package" class="section level1">
<h1 class="hasAnchor">
<a href="#import-the-package" class="anchor" aria-hidden="true"></a>Import the package</h1>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">radtools</span><span class="op">)</span></code></pre></div>
</div>
<div id="reading-data-from-files" class="section level1">
<h1 class="hasAnchor">
<a href="#reading-data-from-files" class="anchor" aria-hidden="true"></a>Reading data from files</h1>
<div id="dicom-1" class="section level2">
<h2 class="hasAnchor">
<a href="#dicom-1" class="anchor" aria-hidden="true"></a>DICOM</h2>
<p>The <code>read_dicom</code> function reads a DICOM dataset from a single file or a directory containing multiple slices. The returned value is a list with attributes <code>hdr</code> and <code>img</code>, each with an element for each slice of the image.</p>
<p>Read a single slice from one <code>.dcm</code> file:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dicom_data_2d</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_dicom.html">read_dicom</a></span><span class="op">(</span><span class="st">"~/Dropbox/radtools_vignette_data/prostate/000008.dcm"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dicom_data_2d</span><span class="op">)</span>
<span class="co">#&gt; [1] "hdr" "img"</span></code></pre></div>
<p>Read a 3D image from a directory containing one <code>.dcm</code> file per slice:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dicom_data_3d</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_dicom.html">read_dicom</a></span><span class="op">(</span><span class="st">"~/Dropbox/radtools_vignette_data/prostate/"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dicom_data_3d</span><span class="op">)</span>
<span class="co">#&gt; [1] "hdr" "img"</span></code></pre></div>
</div>
<div id="nifti-1" class="section level2">
<h2 class="hasAnchor">
<a href="#nifti-1" class="anchor" aria-hidden="true"></a>NIfTI</h2>
<p>NIfTI format uses one <code>.nii</code> file or two files (<code>.hdr</code> and <code>.img</code>) to capture an entire image series. The files can be gzipped or not.</p>
<p>The <code>read_nifti1</code> function handles any of these cases, and returns a list containing one element of class <code>nifti</code>.</p>
<p>Read a 3D NIfTI image from <code>.hdr</code> and <code>.img</code> files:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nifti_data_3d</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_nifti1.html">read_nifti1</a></span><span class="op">(</span><span class="st">"~/Dropbox/radtools_vignette_data/avg152T1_LR_nifti"</span><span class="op">)</span></code></pre></div>
<p>Read a 4D NIfTI image from a <code>.nii.gz</code> file:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nifti_data_4d</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_nifti1.html">read_nifti1</a></span><span class="op">(</span><span class="st">"~/Dropbox/radtools_vignette_data/filtered_func_data.nii.gz"</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="extracting-image-metadata" class="section level1">
<h1 class="hasAnchor">
<a href="#extracting-image-metadata" class="anchor" aria-hidden="true"></a>Extracting image metadata</h1>
<div id="generic-metadata-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#generic-metadata-functions" class="anchor" aria-hidden="true"></a>Generic metadata functions</h2>
<p>Get image dimensions or number of slices:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/img_dimensions.html">img_dimensions</a></span><span class="op">(</span><span class="va">dicom_data_2d</span><span class="op">)</span>
<span class="co">#&gt; Warning in oro.dicom::create3D(img_data): ImagePositionPatient is moving in</span>
<span class="co">#&gt; more than one dimension.</span>
<span class="co">#&gt; [1] 384 384   1</span>
<span class="fu"><a href="reference/num_slices.html">num_slices</a></span><span class="op">(</span><span class="va">dicom_data_2d</span><span class="op">)</span>
<span class="co">#&gt; [1] 1</span>
<span class="fu"><a href="reference/img_dimensions.html">img_dimensions</a></span><span class="op">(</span><span class="va">dicom_data_3d</span><span class="op">)</span>
<span class="co">#&gt; Warning in oro.dicom::create3D(img_data): ImagePositionPatient is moving in</span>
<span class="co">#&gt; more than one dimension.</span>
<span class="co">#&gt; [1] 384 384  19</span>
<span class="fu"><a href="reference/num_slices.html">num_slices</a></span><span class="op">(</span><span class="va">dicom_data_3d</span><span class="op">)</span>
<span class="co">#&gt; [1] 19</span>
<span class="fu"><a href="reference/img_dimensions.html">img_dimensions</a></span><span class="op">(</span><span class="va">nifti_data_3d</span><span class="op">)</span>
<span class="co">#&gt; [1]  91 109  91</span>
<span class="fu"><a href="reference/num_slices.html">num_slices</a></span><span class="op">(</span><span class="va">nifti_data_3d</span><span class="op">)</span>
<span class="co">#&gt; [1] 91</span>
<span class="fu"><a href="reference/img_dimensions.html">img_dimensions</a></span><span class="op">(</span><span class="va">nifti_data_4d</span><span class="op">)</span>
<span class="co">#&gt; [1]  64  64  21 180</span>
<span class="fu"><a href="reference/num_slices.html">num_slices</a></span><span class="op">(</span><span class="va">nifti_data_4d</span><span class="op">)</span>
<span class="co">#&gt; [1] 21</span></code></pre></div>
<p>A typical DICOM dataset will only use a subset of the available metadata attributes, while NIfTI headers always include the same set of attributes. Get the actual metadata attributes for a dataset:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">header_fields_dicom</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/header_fields.html">header_fields</a></span><span class="op">(</span><span class="va">dicom_data_3d</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">header_fields_dicom</span><span class="op">)</span>
<span class="co">#&gt; [1] "AccessionNumber"          "AcquisitionDate"         </span>
<span class="co">#&gt; [3] "AcquisitionMatrix"        "AcquisitionNumber"       </span>
<span class="co">#&gt; [5] "AcquisitionTime"          "AdditionalPatientHistory"</span>
<span class="fu"><a href="reference/header_fields.html">header_fields</a></span><span class="op">(</span><span class="va">nifti_data_3d</span><span class="op">)</span>
<span class="co">#&gt;  [1] ".Data"          "sizeof_hdr"     "data_type"      "db_name"       </span>
<span class="co">#&gt;  [5] "extents"        "session_error"  "regular"        "dim_info"      </span>
<span class="co">#&gt;  [9] "dim_"           "intent_p1"      "intent_p2"      "intent_p3"     </span>
<span class="co">#&gt; [13] "intent_code"    "datatype"       "bitpix"         "slice_start"   </span>
<span class="co">#&gt; [17] "pixdim"         "vox_offset"     "scl_slope"      "scl_inter"     </span>
<span class="co">#&gt; [21] "slice_end"      "slice_code"     "xyzt_units"     "cal_max"       </span>
<span class="co">#&gt; [25] "cal_min"        "slice_duration" "toffset"        "glmax"         </span>
<span class="co">#&gt; [29] "glmin"          "descrip"        "aux_file"       "qform_code"    </span>
<span class="co">#&gt; [33] "sform_code"     "quatern_b"      "quatern_c"      "quatern_d"     </span>
<span class="co">#&gt; [37] "qoffset_x"      "qoffset_y"      "qoffset_z"      "srow_x"        </span>
<span class="co">#&gt; [41] "srow_y"         "srow_z"         "intent_name"    "magic"         </span>
<span class="co">#&gt; [45] "extender"       "reoriented"</span></code></pre></div>
<p>The <code>header_value</code> function returns the attribute value for a given header attribute. If the dataset is a DICOM dataset with multiple slices, it returns a vector of values across slices. NIfTI datasets do not have slice-specific metadata.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/header_value.html">header_value</a></span><span class="op">(</span><span class="va">dicom_data_2d</span>, <span class="st">"SliceLocation"</span><span class="op">)</span>
<span class="co">#&gt; [1] 7.53097</span>
<span class="fu"><a href="reference/header_value.html">header_value</a></span><span class="op">(</span><span class="va">dicom_data_3d</span>, <span class="st">"SliceLocation"</span><span class="op">)</span>
<span class="co">#&gt;  [1]  28.53097  22.53097   1.53097  25.53097  19.53097  16.53097  13.53097</span>
<span class="co">#&gt;  [8]  10.53097   7.53097  -1.46903  -4.46903  -7.46903 -10.46903 -13.46903</span>
<span class="co">#&gt; [15] -16.46903 -19.46903 -22.46903 -25.46903   4.53097</span>
<span class="fu"><a href="reference/header_value.html">header_value</a></span><span class="op">(</span><span class="va">nifti_data_3d</span>, <span class="st">"dim_"</span><span class="op">)</span>
<span class="co">#&gt; [1]   3  91 109  91   1   1   1   1</span>
<span class="fu"><a href="reference/header_value.html">header_value</a></span><span class="op">(</span><span class="va">nifti_data_4d</span>, <span class="st">"dim_"</span><span class="op">)</span>
<span class="co">#&gt; [1]   4  64  64  21 180   1   1   1</span></code></pre></div>
</div>
<div id="dicom-specific-metadata-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#dicom-specific-metadata-functions" class="anchor" aria-hidden="true"></a>DICOM-specific metadata functions</h2>
<p>Each DICOM file has its own header containing metadata for one slice.</p>
<p>Get the metadata for all slices as a matrix, where rows are attributes and columns are slices:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dicom_metadata_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/dicom_header_as_matrix.html">dicom_header_as_matrix</a></span><span class="op">(</span><span class="va">dicom_data_3d</span><span class="op">)</span>
<span class="fu">kable</span><span class="op">(</span><span class="va">dicom_metadata_matrix</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="2%">
<col width="4%">
<col width="15%">
<col width="2%">
<col width="37%">
<col width="37%">
</colgroup>
<thead><tr class="header">
<th align="left">group</th>
<th align="left">element</th>
<th align="left">name</th>
<th align="left">code</th>
<th align="left">slice_1</th>
<th align="left">slice_2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">0002</td>
<td align="left">0000</td>
<td align="left">GroupLength</td>
<td align="left">UL</td>
<td align="left">196</td>
<td align="left">196</td>
</tr>
<tr class="even">
<td align="left">0002</td>
<td align="left">0001</td>
<td align="left">FileMetaInformationVersion</td>
<td align="left">OB</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">0002</td>
<td align="left">0002</td>
<td align="left">MediaStorageSOPClassUID</td>
<td align="left">UI</td>
<td align="left">1.2.840.10008.5.1.4.1.1.4</td>
<td align="left">1.2.840.10008.5.1.4.1.1.4</td>
</tr>
<tr class="even">
<td align="left">0002</td>
<td align="left">0003</td>
<td align="left">MediaStorageSOPInstanceUID</td>
<td align="left">UI</td>
<td align="left">1.3.6.1.4.1.14519.5.2.1.7307.2101.420604470287150790758949858236</td>
<td align="left">1.3.6.1.4.1.14519.5.2.1.7307.2101.192741832082705219013781007567</td>
</tr>
<tr class="odd">
<td align="left">0002</td>
<td align="left">0010</td>
<td align="left">TransferSyntaxUID</td>
<td align="left">UI</td>
<td align="left">1.2.840.10008.1.2.1</td>
<td align="left">1.2.840.10008.1.2.1</td>
</tr>
<tr class="even">
<td align="left">0002</td>
<td align="left">0012</td>
<td align="left">ImplementationClassUID</td>
<td align="left">UI</td>
<td align="left">1.2.40.0.13.1.1.1</td>
<td align="left">1.2.40.0.13.1.1.1</td>
</tr>
<tr class="odd">
<td align="left">0002</td>
<td align="left">0013</td>
<td align="left">ImplementationVersionName</td>
<td align="left">SH</td>
<td align="left">dcm4che-1.4.31</td>
<td align="left">dcm4che-1.4.31</td>
</tr>
<tr class="even">
<td align="left">0008</td>
<td align="left">0005</td>
<td align="left">SpecificCharacterSet</td>
<td align="left">CS</td>
<td align="left">ISO_IR 100</td>
<td align="left">ISO_IR 100</td>
</tr>
<tr class="odd">
<td align="left">0008</td>
<td align="left">0008</td>
<td align="left">ImageType</td>
<td align="left">CS</td>
<td align="left">ORIGINAL PRIMARY M NORM DIS2D</td>
<td align="left">ORIGINAL PRIMARY M NORM DIS2D</td>
</tr>
<tr class="even">
<td align="left">0008</td>
<td align="left">0012</td>
<td align="left">InstanceCreationDate</td>
<td align="left">DA</td>
<td align="left">20030816</td>
<td align="left">20030816</td>
</tr>
</tbody>
</table>
<p>Many metadata attributes will be identical for all slices. Get a list of these contstant attributes and their values:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">const_attributes</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/dicom_constant_header_values.html">dicom_constant_header_values</a></span><span class="op">(</span><span class="va">dicom_data_3d</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">const_attributes</span><span class="op">)</span>
<span class="co">#&gt; $GroupLength</span>
<span class="co">#&gt; [1] 196</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $FileMetaInformationVersion</span>
<span class="co">#&gt; [1] "\001"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $MediaStorageSOPClassUID</span>
<span class="co">#&gt; [1] "1.2.840.10008.5.1.4.1.1.4"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $TransferSyntaxUID</span>
<span class="co">#&gt; [1] "1.2.840.10008.1.2.1"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $ImplementationClassUID</span>
<span class="co">#&gt; [1] "1.2.40.0.13.1.1.1"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $ImplementationVersionName</span>
<span class="co">#&gt; [1] "dcm4che-1.4.31"</span></code></pre></div>
</div>
<div id="nifti-specific-metadata-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#nifti-specific-metadata-functions" class="anchor" aria-hidden="true"></a>NIfTI-specific metadata functions</h2>
<p>As NIfTI images can have more than three dimensions, a simple function returns the number of dimensions:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/nifti1_num_dim.html">nifti1_num_dim</a></span><span class="op">(</span><span class="va">nifti_data_3d</span><span class="op">)</span>
<span class="co">#&gt; [1] 3</span>
<span class="fu"><a href="reference/nifti1_num_dim.html">nifti1_num_dim</a></span><span class="op">(</span><span class="va">nifti_data_4d</span><span class="op">)</span>
<span class="co">#&gt; [1] 4</span></code></pre></div>
<p>A function is provided to get all metadata attributes and values as a named list:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nifti_header_vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/nifti1_header_values.html">nifti1_header_values</a></span><span class="op">(</span><span class="va">nifti_data_4d</span><span class="op">)</span>
<span class="co"># Display the first few metadata values other than the image itself</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">nifti_header_vals</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">nifti_header_vals</span><span class="op">)</span> <span class="op">!=</span> <span class="st">".Data"</span><span class="op">]</span><span class="op">)</span>
<span class="co">#&gt; $sizeof_hdr</span>
<span class="co">#&gt; [1] 348</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $data_type</span>
<span class="co">#&gt; [1] ""</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $db_name</span>
<span class="co">#&gt; [1] ""</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $extents</span>
<span class="co">#&gt; [1] 0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $session_error</span>
<span class="co">#&gt; [1] 0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $regular</span>
<span class="co">#&gt; [1] "r"</span></code></pre></div>
</div>
</div>
<div id="extracting-image-data" class="section level1">
<h1 class="hasAnchor">
<a href="#extracting-image-data" class="anchor" aria-hidden="true"></a>Extracting image data</h1>
<p>The image itself can be extracted as a matrix of pixel intensities using a generic function:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mat_dicom_2d</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/img_data_to_mat.html">img_data_to_mat</a></span><span class="op">(</span><span class="va">dicom_data_2d</span><span class="op">)</span>
<span class="co">#&gt; Warning in oro.dicom::create3D(img_data): ImagePositionPatient is moving in</span>
<span class="co">#&gt; more than one dimension.</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">mat_dicom_2d</span><span class="op">)</span>
<span class="co">#&gt; [1] 384 384   1</span>
<span class="va">mat_dicom_3d</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/img_data_to_mat.html">img_data_to_mat</a></span><span class="op">(</span><span class="va">dicom_data_3d</span><span class="op">)</span>
<span class="co">#&gt; Warning in oro.dicom::create3D(img_data): ImagePositionPatient is moving in</span>
<span class="co">#&gt; more than one dimension.</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">mat_dicom_3d</span><span class="op">)</span>
<span class="co">#&gt; [1] 384 384  19</span>
<span class="va">mat_nifti_3d</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/img_data_to_mat.html">img_data_to_mat</a></span><span class="op">(</span><span class="va">nifti_data_3d</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">mat_nifti_3d</span><span class="op">)</span>
<span class="co">#&gt; [1]  91 109  91</span>
<span class="va">mat_nifti_4d</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/img_data_to_mat.html">img_data_to_mat</a></span><span class="op">(</span><span class="va">nifti_data_4d</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">mat_nifti_4d</span><span class="op">)</span>
<span class="co">#&gt; [1]  64  64  21 180</span></code></pre></div>
<p>For images with more than three dimensions (e.g. some NIfTI datasets), you can hold the additional dimensions constant and just get a 3D matrix by selecting a single coordinate for each dimension:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mat_nifti_4d_to_3d</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/img_data_to_3D_mat.html">img_data_to_3D_mat</a></span><span class="op">(</span><span class="va">nifti_data_4d</span>, coord_extra_dim <span class="op">=</span> <span class="fl">90</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">mat_nifti_4d_to_3d</span><span class="op">)</span>
<span class="co">#&gt; [1] 64 64 21</span></code></pre></div>
</div>
<div id="viewing-images" class="section level1">
<h1 class="hasAnchor">
<a href="#viewing-images" class="anchor" aria-hidden="true"></a>Viewing images</h1>
<p>The <code>view_slice</code> function is generic and works for DICOM or NIfTI data.</p>
<p>View a single-slice dataset:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/view_slice.html">view_slice</a></span><span class="op">(</span><span class="va">dicom_data_2d</span><span class="op">)</span>
<span class="co">#&gt; Warning in oro.dicom::create3D(img_data): ImagePositionPatient is moving in</span>
<span class="co">#&gt; more than one dimension.</span></code></pre></div>
<p><img src="reference/figures/README-view_slice_single-1.png"><!-- --></p>
<p>View one slice of a 3D image:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/view_slice.html">view_slice</a></span><span class="op">(</span><span class="va">dicom_data_3d</span>, slice <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-view_slice_dir-1.png"><!-- --></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/view_slice.html">view_slice</a></span><span class="op">(</span><span class="va">nifti_data_3d</span>, slice <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-view_slice_dir-2.png"><!-- --></p>
<p>A function is also provided to view a slice of an intensity matrix instead of a DICOM or NIfTI data object. In particular, this is useful for viewing slices of NIfTI images with more than three dimensions. In that case, you can create a 3D matrix by holding extra dimensions constant using <code>img_data_to_3D_mat</code>, then pass that matrix to <code>view_slice_mat</code>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/view_slice_mat.html">view_slice_mat</a></span><span class="op">(</span><span class="va">mat_nifti_4d_to_3d</span>, slice <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-view_slice_mat-1.png"><!-- --></p>
</div>
<div id="other-functionality" class="section level1">
<h1 class="hasAnchor">
<a href="#other-functionality" class="anchor" aria-hidden="true"></a>Other functionality</h1>
<div id="exploring-the-dicom-standard" class="section level2">
<h2 class="hasAnchor">
<a href="#exploring-the-dicom-standard" class="anchor" aria-hidden="true"></a>Exploring the DICOM standard</h2>
<p>Several functions are provided to explore aspects of the DICOM standard itself. These functions do not use or analyze any actual data.</p>
<p>Get the DICOM standard version reported here, the web URL describing the standard, and the time it was accessed during package development:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/dicom_standard_version.html">dicom_standard_version</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "PS3.6 2018d"</span>
<span class="fu"><a href="reference/dicom_standard_web.html">dicom_standard_web</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "http://dicom.nema.org/medical/dicom/current/output/html/part06.html"</span>
<span class="fu"><a href="reference/dicom_standard_timestamp.html">dicom_standard_timestamp</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "2018-10-15 15:45:47 MDT"</span></code></pre></div>
<p>The DICOM standard specifies a tag, name, and keyword for each allowable metadata attribute. The following functions return complete lists of these attributes. These functions are self-contained and the orderings of the returned lists do not correspond.</p>
<p>Tags:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tags</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/dicom_all_valid_header_tags.html">dicom_all_valid_header_tags</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">tags</span><span class="op">)</span>
<span class="co">#&gt; [1] 4297</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tags</span>, <span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt;  [1] "(0002,0000)" "(0002,0001)" "(0002,0002)" "(0002,0003)" "(0002,0010)"</span>
<span class="co">#&gt;  [6] "(0002,0012)" "(0002,0013)" "(0002,0016)" "(0002,0017)" "(0002,0018)"</span></code></pre></div>
<p>Names:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">names</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/dicom_all_valid_header_names.html">dicom_all_valid_header_names</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">names</span><span class="op">)</span>
<span class="co">#&gt; [1] 4294</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">names</span>, <span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt;  [1] ""                                               </span>
<span class="co">#&gt;  [2] "2D Degree of Freedom Axis"                      </span>
<span class="co">#&gt;  [3] "2D Degree of Freedom Sequence"                  </span>
<span class="co">#&gt;  [4] "2D Implant Template Group Member Matching Axes" </span>
<span class="co">#&gt;  [5] "2D Implant Template Group Member Matching Point"</span>
<span class="co">#&gt;  [6] "2D Line Coordinates"                            </span>
<span class="co">#&gt;  [7] "2D Line Coordinates Sequence"                   </span>
<span class="co">#&gt;  [8] "2D Mating Axes"                                 </span>
<span class="co">#&gt;  [9] "2D Mating Feature Coordinates Sequence"         </span>
<span class="co">#&gt; [10] "2D Mating Point"</span></code></pre></div>
<p>Keywords:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">keywords</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/dicom_all_valid_header_keywords.html">dicom_all_valid_header_keywords</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">keywords</span><span class="op">)</span>
<span class="co">#&gt; [1] 4294</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">keywords</span>, <span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt;  [1] ""                             "AbortFlag"                   </span>
<span class="co">#&gt;  [3] "AbortReason"                  "AbsoluteChannelDisplayScale" </span>
<span class="co">#&gt;  [5] "AbstractPriorCodeSequence"    "AbstractPriorValue"          </span>
<span class="co">#&gt;  [7] "AccessionNumber"              "AccessoryCode"               </span>
<span class="co">#&gt;  [9] "AcquiredImageAreaDoseProduct" "AcquiredSoundpathLength"</span></code></pre></div>
<p>You can also search the DICOM standard for attribute names and keywords matching a given string.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/dicom_search_header_names.html">dicom_search_header_names</a></span><span class="op">(</span><span class="st">"manufacturer"</span><span class="op">)</span>
<span class="co">#&gt;  [1] "Application Manufacturer"                          </span>
<span class="co">#&gt;  [2] "Application Setup Manufacturer"                    </span>
<span class="co">#&gt;  [3] "Component Manufacturer"                            </span>
<span class="co">#&gt;  [4] "Detector Manufacturer Name"                        </span>
<span class="co">#&gt;  [5] "Detector Manufacturer's Model Name"                </span>
<span class="co">#&gt;  [6] "Hardcopy Device Manufacturer"                      </span>
<span class="co">#&gt;  [7] "Hardcopy Device Manufacturer's Model Name"         </span>
<span class="co">#&gt;  [8] "Information From Manufacturer Sequence"            </span>
<span class="co">#&gt;  [9] "IOL Manufacturer"                                  </span>
<span class="co">#&gt; [10] "Manufacturer"                                      </span>
<span class="co">#&gt; [11] "Manufacturer's Model Name"                         </span>
<span class="co">#&gt; [12] "Manufacturer's Related Model Group"                </span>
<span class="co">#&gt; [13] "Modifying Device Manufacturer"                     </span>
<span class="co">#&gt; [14] "Notification From Manufacturer Sequence"           </span>
<span class="co">#&gt; [15] "Receive Coil Manufacturer Name"                    </span>
<span class="co">#&gt; [16] "Secondary Capture Device Manufacturer"             </span>
<span class="co">#&gt; [17] "Secondary Capture Device Manufacturer's Model Name"</span>
<span class="co">#&gt; [18] "Source Applicator Manufacturer"                    </span>
<span class="co">#&gt; [19] "Source Manufacturer"                               </span>
<span class="co">#&gt; [20] "Transmit Coil Manufacturer Name"                   </span>
<span class="co">#&gt; [21] "Wedge Manufacturer Name"</span>
<span class="fu"><a href="reference/dicom_search_header_keywords.html">dicom_search_header_keywords</a></span><span class="op">(</span><span class="st">"manufacturer"</span><span class="op">)</span>
<span class="co">#&gt;  [1] "ApplicationManufacturer"                    </span>
<span class="co">#&gt;  [2] "ApplicationSetupManufacturer"               </span>
<span class="co">#&gt;  [3] "ComponentManufacturer"                      </span>
<span class="co">#&gt;  [4] "DetectorManufacturerModelName"              </span>
<span class="co">#&gt;  [5] "DetectorManufacturerName"                   </span>
<span class="co">#&gt;  [6] "HardcopyDeviceManufacturer"                 </span>
<span class="co">#&gt;  [7] "HardcopyDeviceManufacturerModelName"        </span>
<span class="co">#&gt;  [8] "InformationFromManufacturerSequence"        </span>
<span class="co">#&gt;  [9] "IOLManufacturer"                            </span>
<span class="co">#&gt; [10] "Manufacturer"                               </span>
<span class="co">#&gt; [11] "ManufacturerModelName"                      </span>
<span class="co">#&gt; [12] "ManufacturerRelatedModelGroup"              </span>
<span class="co">#&gt; [13] "ModifyingDeviceManufacturer"                </span>
<span class="co">#&gt; [14] "NotificationFromManufacturerSequence"       </span>
<span class="co">#&gt; [15] "ReceiveCoilManufacturerName"                </span>
<span class="co">#&gt; [16] "SecondaryCaptureDeviceManufacturer"         </span>
<span class="co">#&gt; [17] "SecondaryCaptureDeviceManufacturerModelName"</span>
<span class="co">#&gt; [18] "SourceApplicatorManufacturer"               </span>
<span class="co">#&gt; [19] "SourceManufacturer"                         </span>
<span class="co">#&gt; [20] "TransmitCoilManufacturerName"               </span>
<span class="co">#&gt; [21] "WedgeManufacturerName"</span></code></pre></div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=radtools">https://​cloud.r-project.org/​package=radtools</a>
</li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Pamela Russell <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Pamela Russell.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
